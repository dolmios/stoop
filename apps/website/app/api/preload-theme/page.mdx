# preloadTheme

Preload theme CSS variables before React renders to prevent FOUC (Flash of Unstyled Content)

## Usage

```typescript
import { preloadTheme } from "./theme";

// Preload theme by name
preloadTheme("dark");

// Preload theme object directly
preloadTheme(customTheme);
```

## Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| theme | `string \| Theme` | **Deprecated** - Parameter is kept for backward compatibility but is ignored. The function always injects CSS variables for **all** themes configured in `themes` config. |

## Preventing FOUC

When loading a non-default theme from localStorage, use `preloadTheme()` before React renders:

### Client Component Approach

```typescript
"use client";

import { useEffect, type ReactNode } from "react";
import { preloadTheme } from "./theme";

export default function RootLayout({ children }: { children: ReactNode }) {
  useEffect(() => {
    const savedTheme = localStorage.getItem("stoop-theme");
    if (savedTheme) {
      preloadTheme(savedTheme);
    }
  }, []);

  return <>{children}</>;
}
```

### Script Tag Approach (Recommended)

```typescript
import Script from "next/script";
import { type ReactNode } from "react";
import { getCssText } from "./theme";

export default function RootLayout({ children }: { children: ReactNode }) {
  return (
    <html>
      <head>
        <style
          id="stoop-styles"
          dangerouslySetInnerHTML={{ __html: getCssText() }}
        />
        <Script
          id="stoop-theme-preload"
          strategy="beforeInteractive"
          dangerouslySetInnerHTML={{
            __html: `
              (function() {
                const savedTheme = localStorage.getItem('stoop-theme');
                if (savedTheme) {
                  // Preload theme CSS variables synchronously
                }
              })();
            `,
          }}
        />
      </head>
      <body>{children}</body>
    </html>
  );
}
```

## Notes

- Use `preloadTheme()` to prevent FOUC when loading themes from localStorage
- Must be called before React renders (use `beforeInteractive` script strategy or in a script tag)
- Injects CSS variables for **all** configured themes synchronously using attribute selectors
- The `theme` parameter is deprecated and ignored - all themes are always injected
- Only works when `themes` config is provided to `createStoop`

